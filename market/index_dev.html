<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>炼金控制台</title>
    <style>
        /* 1. 确保 html 和 body 占据整个视口高度 */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* 防止出现滚动条 */
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
        }

        /* 2. 容器设置为 Flexbox 布局，并占据 100% 高度 */
        .tabs-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
            box-sizing: border-box;
            border: none;
            border-radius: 0;
            box-shadow: none;
            overflow: hidden;
        }

        /* 3. 标签头部分，高度固定 */
        .tabs-header {
            display: flex;
            flex-shrink: 0;
            border-bottom: 1px solid #ddd;
            background-color: #f9f9f9;
            padding-right: 15px; /* 为 checkbox 留出一些空间 */
            align-items: center; /* 垂直居中对齐子项 */
        }
        .tab-button {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            color: #555;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        .tab-button:hover {
            background-color: #eee;
        }
        .tab-button.active {
            background-color: #007bff;
            color: white;
            font-weight: bold;
            border-bottom: 3px solid #0056b3;
        }

        /* Checkbox 控制区域样式 */
        .auto-switch-control {
            display: flex;
            align-items: center;
            margin-left: 20px; /* 与标签按钮的间距 */
            white-space: nowrap; /* 防止文本换行 */
        }
        .auto-switch-control label {
            font-size: 14px;
            color: #666;
            margin-left: 5px;
            cursor: pointer;
        }
        .auto-switch-control input[type="checkbox"] {
            cursor: pointer;
        }

        /* 4. 标签内容区域，占据剩余所有垂直空间 */
        .tab-content {
            flex-grow: 1;
            display: none; /* 默认彻底隐藏所有 tab-content */
            overflow: hidden;
            box-sizing: border-box;
        }
        .tab-content.active {
            display: flex; /* 只有活跃的才显示为 flex */
            flex-direction: column;
            padding: 10px; /* 给图表内容一些内边距，根据需要调整 */
        }

        /* 5. 图表区域，占据其父容器 (tab-content) 的所有空间 */
        .chart {
            width: 100%;
            height: 100%;
            background-color: #e2f0fb; /* 占位符背景色 */
            border: 1px dashed #a8d5ed; /* 增加虚线边框，让占位符更明显 */
            box-sizing: border-box;

            /* 内部内容居中，适用于占位符或一些嵌入式图表 */
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            color: #555;
        }

        /* 如果您要嵌入 TradingView iframe，请确保其宽度和高度也是100% */
        .tradingview-widget-container,
        .tradingview-widget-container iframe {
            width: 100%;
            height: 100%;
            display: block; /* 确保 iframe 是块级元素 */
            border: none; /* 移除 iframe 默认边框 */
        }
    </style>
</head>
<body>

    <div class="tabs-container" id="myTabs">
        <div class="tabs-header">
            <button class="tab-button active" data-tab="btc">比特币 (BTC)</button>
            <button class="tab-button" data-tab="sp500">标普500 (SP500)</button>
            <button class="tab-button" data-tab="usdjpy">USDJPY</button>
            <button class="tab-button" data-tab="gold">黄金 (XAU)</button>

            <div class="auto-switch-control">
                <input type="checkbox" id="autoSwitchToggle" checked>
                <label for="autoSwitchToggle">自动切换</label>
            </div>
        </div>

        <div class="tab-content active" id="btc-content">
            <div class="chart">
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container" style="height:100%;width:100%">
  <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
  {
  "allow_symbol_change": true,
  "calendar": false,
  "details": false,
  "hide_side_toolbar": true,
  "hide_top_toolbar": false,
  "hide_legend": false,
  "hide_volume": false,
  "hotlist": false,
  "interval": "D",
  "locale": "en",
  "save_image": true,
  "style": "1",
  "symbol": "COINBASE:BTCUSD",
  "theme": "light",
  "timezone": "Etc/UTC",
  "backgroundColor": "#ffffff",
  "gridColor": "rgba(46, 46, 46, 0.06)",
  "watchlist": [],
  "withdateranges": false,
  "compareSymbols": [],
  "studies": [],
  "autosize": true
}
  </script>
</div>
<!-- TradingView Widget END -->
                </div>
        </div>

        <div class="tab-content" id="sp500-content">
            <div class="chart">
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container" style="height:100%;width:100%">
  <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
  {
  "allow_symbol_change": true,
  "calendar": false,
  "details": false,
  "hide_side_toolbar": true,
  "hide_top_toolbar": false,
  "hide_legend": false,
  "hide_volume": false,
  "hotlist": false,
  "interval": "D",
  "locale": "en",
  "save_image": true,
  "style": "1",
  "symbol": "FRED:SP500",
  "theme": "light",
  "timezone": "Etc/UTC",
  "backgroundColor": "#ffffff",
  "gridColor": "rgba(46, 46, 46, 0.06)",
  "watchlist": [],
  "withdateranges": false,
  "compareSymbols": [],
  "studies": [],
  "autosize": true
}
  </script>
</div>
<!-- TradingView Widget END -->
                </div>
        </div>

        <div class="tab-content" id="usdjpy-content">
            <div class="chart">
                <!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container" style="height:100%;width:100%">
  <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
  {
  "allow_symbol_change": true,
  "calendar": false,
  "details": false,
  "hide_side_toolbar": true,
  "hide_top_toolbar": false,
  "hide_legend": false,
  "hide_volume": false,
  "hotlist": false,
  "interval": "D",
  "locale": "en",
  "save_image": true,
  "style": "1",
  "symbol": "FX:USDJPY",
  "theme": "light",
  "timezone": "Etc/UTC",
  "backgroundColor": "#ffffff",
  "gridColor": "rgba(46, 46, 46, 0.06)",
  "watchlist": [],
  "withdateranges": false,
  "compareSymbols": [],
  "studies": [],
  "autosize": true
}
  </script>
</div>
<!-- TradingView Widget END -->
                </div>
        </div>

        <div class="tab-content" id="gold-content">
            <div class="chart">
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container" style="height:100%;width:100%">
  <div class="tradingview-widget-container__widget" style="height:calc(100% - 32px);width:100%"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">Track all markets on TradingView</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
  {
  "allow_symbol_change": true,
  "calendar": false,
  "details": false,
  "hide_side_toolbar": true,
  "hide_top_toolbar": false,
  "hide_legend": false,
  "hide_volume": false,
  "hotlist": false,
  "interval": "D",
  "locale": "en",
  "save_image": true,
  "style": "1",
  "symbol": "OANDA:XAUUSD",
  "theme": "light",
  "timezone": "Etc/UTC",
  "backgroundColor": "#ffffff",
  "gridColor": "rgba(46, 46, 46, 0.06)",
  "watchlist": [],
  "withdateranges": false,
  "compareSymbols": [],
  "studies": [],
  "autosize": true
}
  </script>
</div>
<!-- TradingView Widget END -->
                </div>
        </div>
    </div>

    <script>
        const tabContainer = document.getElementById('myTabs');
        const tabButtons = tabContainer.querySelectorAll('.tab-button');
        const tabContents = tabContainer.querySelectorAll('.tab-content');
        const autoSwitchToggle = document.getElementById('autoSwitchToggle'); // 获取 checkbox 元素

        let currentIndex = 0;
        let intervalId;
        const autoSwitchInterval = 5000; // 自动切换间隔时间 (毫秒)，例如 5000 毫秒 = 5 秒

        function showTab(index) {
            tabButtons.forEach(button => button.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));

            tabButtons[index].classList.add('active');
            tabContents[index].classList.add('active');
            currentIndex = index;
        }

        function autoSwitchTab() {
            currentIndex = (currentIndex + 1) % tabButtons.length;
            showTab(currentIndex);
        }

        function startAutoSwitch() {
            if (intervalId) {
                clearInterval(intervalId); // 确保没有多个定时器在跑
            }
            intervalId = setInterval(autoSwitchTab, autoSwitchInterval);
        }

        function stopAutoSwitch() {
            clearInterval(intervalId);
        }

        // --- 初始化和事件监听 ---

        // 页面加载时显示第一个标签页
        showTab(0);

        // 根据 checkbox 的初始状态来决定是否启动自动切换
        if (autoSwitchToggle.checked) {
            startAutoSwitch();
        }

        // 为每个标签页按钮添加点击事件监听器
        tabButtons.forEach((button, index) => {
            button.addEventListener('click', () => {
                // 手动点击后，如果自动切换是开启的，先停止再重新启动
                // 这样可以确保在手动切换后，自动切换的计时器会重置
                if (autoSwitchToggle.checked) {
                    stopAutoSwitch();
                }
                showTab(index);
                if (autoSwitchToggle.checked) {
                    startAutoSwitch(); // 手动切换后重新启动自动切换
                }
            });
        });

        // 为 checkbox 添加 change 事件监听器
        autoSwitchToggle.addEventListener('change', () => {
            if (autoSwitchToggle.checked) {
                startAutoSwitch(); // 如果被勾选，开始自动切换
            } else {
                stopAutoSwitch(); // 如果未勾选，停止自动切换
            }
        });
    </script>

</body>
</html>